plugins {
    id 'org.jbake.site'             version '5.3.0'
    id 'org.ajoberstar.git-publish' version '3.0.0'
}

jbake {
    configuration['asciidoctor.attributes.export'] = true
    configuration['asciidoctor.attributes.export.prefix'] = 'jbake-'

    version = '2.6.5'
}

gitPublish {
    repoUri = 'https://github.com/kordamp/kordamp.github.io.git'
    branch  = 'master'
    contents {
        from project.tasks.findByName('bake').outputs.files
    }
    commitMessage = 'Publish site'
}

gitPublishCommit.dependsOn(project.tasks.findByName('bake'))
